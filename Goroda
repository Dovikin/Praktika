cities = set()
last_char = None

while True:
    city = input(f"Назови город{' на букву ' + last_char if last_char else ''}: ").strip().title()
    
    if not city:
        print("Игра завершена!")
        break
    
    if city in cities:
        print("Этот город уже был!")
        continue
    
    if last_char and city[0] != last_char:
        print(f"Город должен начинаться на букву '{last_char}'!")
        continue
    
    cities.add(city)
    last_char = city[-1] if city[-1] not in "ьыъ" else city[-2]
    print(f"Принято! Теперь город на '{last_char.upper()}'.")
